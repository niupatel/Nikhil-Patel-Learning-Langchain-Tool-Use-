Core components
Structured output allows agents to return data in a specific, predictable format. Instead of
parsing natural language responses, you get typed structured data.
LangChainʼs prebuilt ReAct agent  handles structured output automatically.
The user sets their desired structured output schema, and when the model generates the
structured data, itʼs captured, validated, and returned in the  key of
the agentʼs state.
Controls how the agent returns structured data. You can provide either a Zod object or
JSON schema. By default, the agent uses a tool calling strategy, in which the output is
created by an additional tool call. Certain models support native structured output, in
which case the agent will use that strategy instead.
You can control the behavior by wrapping  in a  or
type ResponseFormat = (
    | ZodSchema<StructuredResponseT> // a Zod schema
    | Record<string, unknown> // a JSON Schema
)
const agent = createAgent({
    // ...
    responseFormat: ResponseFormat | ResponseFormat[]
})
Core components
Structured output - Docs by LangChain https://docs.langchain.com/oss/javascript/langchain/structured-output
1 of 21 1/20/2026, 3:00 PM
 function call:
The structured response is returned in the  key of the agentʼs final
state.
Support for native structured output features is read dynamically from the modelʼs 
 if using . If data are not available, use another condition or specify
manually:
If tools are specified, the model must support simultaneous use of tools and structured
output.
Some model providers support structured output natively through their APIs (e.g. OpenAI,
xAI �Grok�, Gemini, Anthropic �Claude��. This is the most reliable method when available.
To use this strategy, configure a :
import { toolStrategy, providerStrategy } from "langchain";
const agent = createAgent({
    // use a provider strategy if supported by the model
    responseFormat: providerStrategy(z.object({ ... }))
    // or enforce a tool strategy
    responseFormat: toolStrategy(z.object({ ... }))
})
const customProfile: ModelProfile = {
    structuredOutput: true,
    // ...
}
const model = await initChatModel("...", { profile: customProfile });
Core components
Structured output - Docs by LangChain https://docs.langchain.com/oss/javascript/langchain/structured-output
2 of 21 1/20/2026, 3:00 PM
Core components
Structured output - Docs by LangChain https://docs.langchain.com/oss/javascript/langchain/structured-output
3 of 21 1/20/2026, 3:00 PM
Core components
Structured output - Docs by LangChain https://docs.langchain.com/oss/javascript/langchain/structured-output
4 of 21 1/20/2026, 3:00 PM
Core components
Structured output - Docs by LangChain https://docs.langchain.com/oss/javascript/langchain/structured-output
5 of 21 1/20/2026, 3:00 PM
Core components
Structured output - Docs by LangChain https://docs.langchain.com/oss/javascript/langchain/structured-output
6 of 21 1/20/2026, 3:00 PM
Core components
Structured output - Docs by LangChain https://docs.langchain.com/oss/javascript/langchain/structured-output
7 of 21 1/20/2026, 3:00 PM
Core components
Structured output - Docs by LangChain https://docs.langchain.com/oss/javascript/langchain/structured-output
8 of 21 1/20/2026, 3:00 PM
function providerStrategy<StructuredResponseT>(
    schema: ZodSchema<StructuredResponseT> | JsonSchemaFormat
): ProviderStrategy<StructuredResponseT>
Core components
Structured output - Docs by LangChain https://docs.langchain.com/oss/javascript/langchain/structured-output
9 of 21 1/20/2026, 3:00 PM
The schema defining the structured output format. Supports:
LangChain automatically uses  when you pass a schema type directly
to  and the model supports native structured output:
Provider-native structured output provides high reliability and strict validation because
the model provider enforces the schema. Use it when available.
: A zod schema
: A JSON schema object
import * as z from "zod";
import { createAgent, providerStrategy } from "langchain";
const ContactInfo = z.object({
    name: z.string().describe("The name of the person"),
    email: z.string().describe("The email address of the person"),
    phone: z.string().describe("The phone number of the person"),
});
const agent = createAgent({
    model: "gpt-5",
    tools: [],
    responseFormat: providerStrategy(ContactInfo)
});
const result = await agent.invoke({
    messages: [{"role": "user", "content": "Extract contact info from: John Doe, john@example.co
});
console.log(result.structuredResponse);
// { name: "John Doe", email: "john@example.com", phone: "(555) 123-4567" }
Core components
Structured output - Docs by LangChain https://docs.langchain.com/oss/javascript/langchain/structured-output
10 of 21 1/20/2026, 3:00 PM
If the provider natively supports structured output for your model choice, it is functionally
equivalent to write  instead of 
.
In either case, if structured output is not supported, the agent will fall back to a tool calling
strategy.
For models that donʼt support native structured output, LangChain uses tool calling to
achieve the same result. This works with all models that support tool calling (most
modern models).
To use this strategy, configure a :
The schema defining the structured output format. Supports:
Custom content for the tool message returned when structured output is generated. If not provided,
defaults to a message showing the structured response data.
: A zod schema
: A JSON schema object
function toolStrategy<StructuredResponseT>(
    responseFormat:
        | JsonSchemaFormat
        | ZodSchema<StructuredResponseT>
        | (ZodSchema<StructuredResponseT> | JsonSchemaFormat)[]
    options?: ToolStrategyOptions
): ToolStrategy<StructuredResponseT>
Core components
Structured output - Docs by LangChain https://docs.langchain.com/oss/javascript/langchain/structured-output
11 of 21 1/20/2026, 3:00 PM
Options parameter containing an optional  parameter for customizing the error handling
strategy.
The  parameter allows you to customize the message that appears
: Catch all errors with default error template (default)
: No retry, let exceptions propagate
: retry with the provided message or
throw the error
import * as z from "zod";
import { createAgent, toolStrategy } from "langchain";
const ProductReview = z.object({
    rating: z.number().min(1).max(5).optional(),
    sentiment: z.enum(["positive", "negative"]),
    keyPoints: z.array(z.string()).describe("The key points of the review. Lowercase, 1-3 words 
});
const agent = createAgent({
    model: "gpt-5",
    tools: [],
    responseFormat: toolStrategy(ProductReview)
})
const result = await agent.invoke({
    "messages": [{"role": "user", "content": "Analyze this review: 'Great product: 5 out of 5 st
})
console.log(result.structuredResponse);
// { "rating": 5, "sentiment": "positive", "keyPoints": ["fast shipping", "expensive"] }
Core components
Structured output - Docs by LangChain https://docs.langchain.com/oss/javascript/langchain/structured-output
12 of 21 1/20/2026, 3:00 PM
in the conversation history when structured output is generated:
Without , weʼd see:
import * as z from "zod";
import { createAgent, toolStrategy } from "langchain";
const MeetingAction = z.object({
    task: z.string().describe("The specific task to be completed"),
    assignee: z.string().describe("Person responsible for the task"),
    priority: z.enum(["low", "medium", "high"]).describe("Priority level"),
});
const agent = createAgent({
    model: "gpt-5",
    tools: [],
    responseFormat: toolStrategy(MeetingAction, {
        toolMessageContent: "Action item captured and added to meeting notes!"
    })
});
const result = await agent.invoke({
    messages: [{"role": "user", "content": "From our meeting: Sarah needs to update the project 
});
console.log(result);
/**
 * {
 *   messages: [
 *     { role: "user", content: "From our meeting: Sarah needs to update the project timeline as
 *     { role: "assistant", content: "Action item captured and added to meeting notes!", tool_ca
 *     { role: "tool", content: "Action item captured and added to meeting notes!", tool_call_id
 *   ],
 *   structuredResponse: { task: "update the project timeline", assignee: "Sarah", priority: "hi
 * }
 */
Core components
Structured output - Docs by LangChain https://docs.langchain.com/oss/javascript/langchain/structured-output
13 of 21 1/20/2026, 3:00 PM
Models can make mistakes when generating structured output via tool calling. LangChain
provides intelligent retry mechanisms to handle these errors automatically.
When a model incorrectly calls multiple structured output tools, the agent provides error
feedback in a  and prompts the model to retry:
# console.log(result);
/**
 * {
 *   messages: [
 *     ...
 *     { role: "tool", content: "Returning structured response: {'task': 'update the project tim
 *   ],
 *   structuredResponse: { task: "update the project timeline", assignee: "Sarah", priority: "hi
 * }
 */
Core components
Structured output - Docs by LangChain https://docs.langchain.com/oss/javascript/langchain/structured-output
14 of 21 1/20/2026, 3:00 PM
import * as z from "zod";
import { createAgent, toolStrategy } from "langchain";
const ContactInfo = z.object({
    name: z.string().describe("Person's name"),
    email: z.string().describe("Email address"),
});
const EventDetails = z.object({
    event_name: z.string().describe("Name of the event"),
    date: z.string().describe("Event date"),
});
const agent = createAgent({
    model: "gpt-5",
    tools: [],
    responseFormat: toolStrategy([ContactInfo, EventDetails]),
});
const result = await agent.invoke({
    messages: [
        {
        role: "user",
        content:
            "Extract info: John Doe (john@email.com) is organizing Tech Conference on March 15th
        },
    ],
});
console.log(result);
/**
 * {
 *   messages: [
 *     { role: "user", content: "Extract info: John Doe (john@email.com) is organizing Tech Conf
 *     { role: "assistant", content: "", tool_calls: [ { name: "ContactInfo", args: { name: "Joh
 *     { role: "tool", content: "Error: Model incorrectly returned multiple structured responses
 *     { role: "tool", content: "Error: Model incorrectly returned multiple structured responses
 *     { role: "assistant", content: "", tool_calls: [ { name: "ContactInfo", args: { name: "Joh
Core components
Structured output - Docs by LangChain https://docs.langchain.com/oss/javascript/langchain/structured-output
15 of 21 1/20/2026, 3:00 PM
When structured output doesnʼt match the expected schema, the agent provides specific
error feedback:
 *     { role: "tool", content: "Returning structured response: {'name': 'John Doe', 'email': 'j
 *   ],
 *   structuredResponse: { name: "John Doe", email: "john@email.com" }
 * }
 */
Core components
Structured output - Docs by LangChain https://docs.langchain.com/oss/javascript/langchain/structured-output
16 of 21 1/20/2026, 3:00 PM
import * as z from "zod";
import { createAgent, toolStrategy } from "langchain";
const ProductRating = z.object({
    rating: z.number().min(1).max(5).describe("Rating from 1-5"),
    comment: z.string().describe("Review comment"),
});
const agent = createAgent({
    model: "gpt-5",
    tools: [],
    responseFormat: toolStrategy(ProductRating),
});
const result = await agent.invoke({
    messages: [
        {
        role: "user",
        content: "Parse this: Amazing product, 10/10!",
        },
    ],
});
console.log(result);
/**
 * {
 *   messages: [
 *     { role: "user", content: "Parse this: Amazing product, 10/10!" },
 *     { role: "assistant", content: "", tool_calls: [ { name: "ProductRating", args: { rating: 
 *     { role: "tool", content: "Error: Failed to parse structured output for tool 'ProductRatin
 *     { role: "assistant", content: "", tool_calls: [ { name: "ProductRating", args: { rating: 
 *     { role: "tool", content: "Returning structured response: {'rating': 5, 'comment': 'Amazin
 *   ],
 *   structuredResponse: { rating: 5, comment: "Amazing product" }
 * }
 */
Core components
Structured output - Docs by LangChain https://docs.langchain.com/oss/javascript/langchain/structured-output
17 of 21 1/20/2026, 3:00 PM
You can customize how errors are handled using the  parameter:
const responseFormat = toolStrategy(ProductRating, {
    handleError: "Please provide a valid rating between 1-5 and include a comment."
)
// Error message becomes:
// { role: "tool", content: "Please provide a valid rating between 1-5 and include a comment." }
import { ToolInputParsingException } from "@langchain/core/tools";
const responseFormat = toolStrategy(ProductRating, {
    handleError: (error: ToolStrategyError) => {
        if (error instanceof ToolInputParsingException) {
        return "Please provide a valid rating between 1-5 and include a comment."
        }
        return error.message;
    }
)
// Only validation errors get retried with default message:
// { role: "tool", content: "Error: Failed to parse structured output for tool 'ProductRating': 
Core components
Structured output - Docs by LangChain https://docs.langchain.com/oss/javascript/langchain/structured-output
18 of 21 1/20/2026, 3:00 PM
Was this page helpful? Yes No
 or .
 to Claude, VSCode, and more via MCP for real-time answers.
const responseFormat = toolStrategy(ProductRating, {
    handleError: (error: ToolStrategyError) => {
        if (error instanceof ToolInputParsingException) {
        return "Please provide a valid rating between 1-5 and include a comment."
        }
        if (error instanceof CustomUserError) {
        return "This is a custom user error.";
        }
        return error.message;
    }
)
const responseFormat = toolStrategy(ProductRating, {
    handleError: false  // All errors raised
)
Core components
Structured output - Docs by LangChain https://docs.langchain.com/oss/javascript/langchain/structured-output
19 of 21 1/20/2026, 3:00 PM
Forum
Changelog
LangChain Academy
Trust Center
About
Careers
Blog
Powered by
Core components
Structured output - Docs by LangChain https://docs.langchain.com/oss/javascript/langchain/structured-output
20 of 21 1/20/2026, 3:00 PM
Core components
Structured output - Docs by LangChain https://docs.langchain.com/oss/javascript/langchain/structured-output
21 of 21 1/20/2026, 3:00 PM